requires:
  plugins:
    - name: workflow-plugin-http

modules:
  # HTTP server for the gateway
  - name: gateway-server
    type: http.server
    config:
      address: ":8090"

  # HTTP router for request routing
  - name: gateway-router
    type: http.router
    dependsOn:
      - gateway-server

  # Reverse proxy module
  - name: gateway-proxy
    type: reverseproxy

# Configuration for the reverse proxy module
reverseproxy:
  backend_services:
    users: "http://users-service:8080"
    products: "http://products-service:8080"
    orders: "http://orders-service:8080"
    health: "http://localhost:8091"  # Mock health service
  default_backend: "health"
  timeout: 10
  forward_headers:
    - "Authorization"
    - "User-Agent"
    - "X-Request-ID"
