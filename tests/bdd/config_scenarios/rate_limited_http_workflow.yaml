modules:
  - name: http-server
    type: http.server
    config:
      address: ":8084"
  - name: rate-limit-middleware
    type: http.middleware.ratelimit
    config:
      requestsPerMinute: 100
      burstSize: 20
  - name: api-router
    type: http.router
  - name: api-handler
    type: http.handler

workflows:
  http:
    routes:
      - method: GET
        path: /api/limited
        handler: api-handler
        middlewares:
          - rate-limit-middleware